import{bH as I,C as g,r as i,I as m,J as L,d as S,bJ as y,o as E,a as C,c as k,e,E as t,F as T,G as x,t as h}from"./index-823cd0c2.js";import"./firebaseConfig-27078b1e.js";const B=I("teacher",()=>{const _=g.database().ref("teachers/"),n=i({}),b=()=>{_.once("value",o=>{n.value=o.val(),console.log(n.value)})},u=m(),c=i(!1),l=()=>{u.push("/admin/add_teacher")},v=o=>{u.push(`/admin/teacher/${o}`)},f=o=>{_.child(o.id).remove(),L({message:"刪除"+o.name+"成功！",type:"success"}),parent.location.reload(),u.push("/admin/index")},d=i(localStorage.getItem("token")),p=i(localStorage.getItem("userId"));return{see:c,token:d,userId:p,teacherLists:n,goAdd:l,goEdit:v,toDelete:f,addLoveCount:o=>{if(p.value==null){console.log("addLoveCountId",o);const a=o.loveCount++;console.log(a),g.database().ref("teachers/"+o.id+"/loveCount").set(a)}if(d.value){console.log("addLoveCountId",o);const a=o.loveCount;g.database().ref("teachers/"+o.id+"/loveCount").set(a)}},tokenSee:()=>{d.value!=null?c.value=!0:c.value=!1},getTeachers:b}}),D={class:"teachers_info"},$={class:"addIcon"},A=e("td",null,"pic",-1),F=e("td",null,"姓名",-1),J=e("td",null,"出生日期",-1),M=e("td",null,"電子郵件",-1),R=e("td",null,"行動電話",-1),q=["src"],G=["onClick"],H=["onClick"],j=S({__name:"Teachers",setup(_){const n=B(),{token:b,userId:u,teacherLists:c}=y(n),{goAdd:l,goEdit:v,toDelete:f,getTeachers:d}=n;return E(()=>{d()}),(p,r)=>(C(),k("div",D,[e("div",$,[e("i",{onClick:r[0]||(r[0]=(...s)=>t(l)&&t(l)(...s)),class:"fa-solid fa-circle-plus"})]),e("table",null,[e("thead",null,[e("tr",null,[A,F,J,M,R,e("td",null,[e("i",{onClick:r[1]||(r[1]=(...s)=>t(l)&&t(l)(...s)),class:"fa-solid fa-circle-plus"})])])]),e("tbody",null,[(C(!0),k(T,null,x(t(c),(s,o)=>(C(),k("tr",{key:o},[e("td",null,[e("div",null,[e("img",{src:s.picture},null,8,q)])]),e("td",null,h(s.name),1),e("td",null,h(s.birthday),1),e("td",null,h(s.email),1),e("td",null,h(s.phone),1),e("td",null,[e("i",{onClick:a=>t(v)(s.id),class:"fa-solid fa-pen-to-square"},null,8,G),e("i",{onClick:a=>t(f)(s),class:"icon-bin"},null,8,H)])]))),128))])])]))}});export{j as default};
