import{a2 as ne,D as Q,E as v,A as oe,r as E,bB as ae,o as N,n as H,aI as D,bC as X,d as se,aC as re,a1 as P,ay as ce,p as J,q as ue,aq as ie}from"./index-837c2d33.js";import{i as le}from"./el-input-b549b1f1.js";var de={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const fe=e=>(n,o)=>pe(n,o,v(e)),pe=(e,n,o)=>ae(o,e,e).replace(/\{(\w+)\}/g,(a,r)=>{var c;return`${(c=n==null?void 0:n[r])!=null?c:`{${r}}`}`}),me=e=>{const n=Q(()=>v(e).name),o=oe(e)?e:E(e);return{lang:n,locale:o,t:fe(e)}},De=()=>{const e=ne("locale");return me(Q(()=>e.value||de))};let m=[];const $=e=>{const n=e;n.key===X.esc&&m.forEach(o=>o(n))},ve=e=>{N(()=>{m.length===0&&document.addEventListener("keydown",$),H&&m.push(e)}),D(()=>{m=m.filter(n=>n!==e),m.length===0&&H&&document.removeEventListener("keydown",$)})},k="focus-trap.focus-after-trapped",_="focus-trap.focus-after-released",Ee="focus-trap.focusout-prevented",V={cancelable:!0,bubbles:!1},he={cancelable:!0,bubbles:!1},Y="focusAfterTrapped",j="focusAfterReleased",Te=Symbol("elFocusTrap"),O=E(),y=E(0),R=E(0);let g=0;const Z=e=>{const n=[],o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const r=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||r?NodeFilter.FILTER_SKIP:a.tabIndex>=0||a===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)n.push(o.currentNode);return n},W=(e,n)=>{for(const o of e)if(!ge(o,n))return o},ge=(e,n)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},be=e=>{const n=Z(e),o=W(n,e),a=W(n.reverse(),e);return[o,a]},Fe=e=>e instanceof HTMLInputElement&&"select"in e,f=(e,n)=>{if(e&&e.focus){const o=document.activeElement;e.focus({preventScroll:!0}),R.value=window.performance.now(),e!==o&&Fe(e)&&n&&e.select()}};function q(e,n){const o=[...e],a=e.indexOf(n);return a!==-1&&o.splice(a,1),o}const ye=()=>{let e=[];return{push:a=>{const r=e[0];r&&a!==r&&r.pause(),e=q(e,a),e.unshift(a)},remove:a=>{var r,c;e=q(e,a),(c=(r=e[0])==null?void 0:r.resume)==null||c.call(r)}}},we=(e,n=!1)=>{const o=document.activeElement;for(const a of e)if(f(a,n),document.activeElement!==o)return},G=ye(),Se=()=>y.value>R.value,b=()=>{O.value="pointer",y.value=window.performance.now()},z=()=>{O.value="keyboard",y.value=window.performance.now()},Ce=()=>(N(()=>{g===0&&(document.addEventListener("mousedown",b),document.addEventListener("touchstart",b),document.addEventListener("keydown",z)),g++}),D(()=>{g--,g<=0&&(document.removeEventListener("mousedown",b),document.removeEventListener("touchstart",b),document.removeEventListener("keydown",z))}),{focusReason:O,lastUserFocusTimestamp:y,lastAutomatedFocusTimestamp:R}),F=e=>new CustomEvent(Ee,{...he,detail:e}),Le=se({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Y,j,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:n}){const o=E();let a,r;const{focusReason:c}=Ce();ve(t=>{e.trapped&&!p.paused&&n("release-requested",t)});const p={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},h=t=>{if(!e.loop&&!e.trapped||p.paused)return;const{key:s,altKey:u,ctrlKey:i,metaKey:l,currentTarget:M,shiftKey:K}=t,{loop:B}=e,te=s===X.tab&&!u&&!i&&!l,T=document.activeElement;if(te&&T){const S=M,[C,L]=be(S);if(C&&L){if(!K&&T===L){const d=F({focusReason:c.value});n("focusout-prevented",d),d.defaultPrevented||(t.preventDefault(),B&&f(C,!0))}else if(K&&[C,S].includes(T)){const d=F({focusReason:c.value});n("focusout-prevented",d),d.defaultPrevented||(t.preventDefault(),B&&f(L,!0))}}else if(T===S){const d=F({focusReason:c.value});n("focusout-prevented",d),d.defaultPrevented||t.preventDefault()}}};re(Te,{focusTrapRef:o,onKeydown:h}),P(()=>e.focusTrapEl,t=>{t&&(o.value=t)},{immediate:!0}),P([o],([t],[s])=>{t&&(t.addEventListener("keydown",h),t.addEventListener("focusin",A),t.addEventListener("focusout",I)),s&&(s.removeEventListener("keydown",h),s.removeEventListener("focusin",A),s.removeEventListener("focusout",I))});const w=t=>{n(Y,t)},ee=t=>n(j,t),A=t=>{const s=v(o);if(!s)return;const u=t.target,i=t.relatedTarget,l=u&&s.contains(u);e.trapped||i&&s.contains(i)||(a=i),l&&n("focusin",t),!p.paused&&e.trapped&&(l?r=u:f(r,!0))},I=t=>{const s=v(o);if(!(p.paused||!s))if(e.trapped){const u=t.relatedTarget;!le(u)&&!s.contains(u)&&setTimeout(()=>{if(!p.paused&&e.trapped){const i=F({focusReason:c.value});n("focusout-prevented",i),i.defaultPrevented||f(r,!0)}},0)}else{const u=t.target;u&&s.contains(u)||n("focusout",t)}};async function x(){await J();const t=v(o);if(t){G.push(p);const s=t.contains(document.activeElement)?a:document.activeElement;if(a=s,!t.contains(s)){const i=new Event(k,V);t.addEventListener(k,w),t.dispatchEvent(i),i.defaultPrevented||J(()=>{let l=e.focusStartEl;ue(l)||(f(l),document.activeElement!==l&&(l="first")),l==="first"&&we(Z(t),!0),(document.activeElement===s||l==="container")&&f(t)})}}}function U(){const t=v(o);if(t){t.removeEventListener(k,w);const s=new CustomEvent(_,{...V,detail:{focusReason:c.value}});t.addEventListener(_,ee),t.dispatchEvent(s),!s.defaultPrevented&&(c.value=="keyboard"||!Se())&&f(a??document.body),t.removeEventListener(_,w),G.remove(p)}}return N(()=>{e.trapped&&x(),P(()=>e.trapped,t=>{t?x():U()})}),D(()=>{e.trapped&&U()}),{onKeydown:h}}});function Pe(e,n,o,a,r,c){return ie(e.$slots,"default",{handleKeydown:e.onKeydown})}var Oe=ce(Le,[["render",Pe],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);export{Oe as E,Te as F,De as u};
