import{bH as I,C as p,r as u,I as L,J as S,d as m,bJ as y,o as E,a as C,c as k,e,E as t,F as T,G as B,t as i}from"./index-16e9b2ae.js";import"./firebaseConfig-2a0b254c.js";const D=I("teacher",()=>{const h=p.database().ref("teachers/"),l=u({}),b=()=>{h.once("value",o=>{l.value=o.val(),console.log(l.value)})},_=L(),c=u(!1),n=()=>{_.push("/admin/add_teacher")},v=o=>{_.push(`/admin/teacher/${o}`)},f=o=>{h.child(o.id).remove(),S({message:"刪除"+o.name+"成功！",type:"success"}),parent.location.reload()},d=u(localStorage.getItem("token")),g=u(localStorage.getItem("userId"));return{see:c,token:d,userId:g,teacherLists:l,goAdd:n,goEdit:v,toDelete:f,addLoveCount:o=>{if(g.value==null){console.log("addLoveCountId",o);const a=o.loveCount++;console.log(a),p.database().ref("teachers/"+o.id+"/loveCount").set(a)}if(d.value){console.log("addLoveCountId",o);const a=o.loveCount;p.database().ref("teachers/"+o.id+"/loveCount").set(a)}},tokenSee:()=>{d.value!=null?c.value=!0:c.value=!1},getTeachers:b}}),$={class:"teachers_info"},x={class:"addIcon"},A=e("td",null,"pic",-1),F=e("td",null,"姓名",-1),J=e("td",null,"出生日期",-1),M=e("td",null,"電子郵件",-1),R=e("td",null,"行動電話",-1),q=["src"],G=["onClick"],H=["onClick"],j=m({__name:"Teachers",setup(h){const l=D(),{token:b,userId:_,teacherLists:c}=y(l),{goAdd:n,goEdit:v,toDelete:f,getTeachers:d}=l;return E(()=>{d()}),(g,r)=>(C(),k("div",$,[e("div",x,[e("i",{onClick:r[0]||(r[0]=(...s)=>t(n)&&t(n)(...s)),class:"fa-solid fa-circle-plus"})]),e("table",null,[e("thead",null,[e("tr",null,[A,F,J,M,R,e("td",null,[e("i",{onClick:r[1]||(r[1]=(...s)=>t(n)&&t(n)(...s)),class:"fa-solid fa-circle-plus"})])])]),e("tbody",null,[(C(!0),k(T,null,B(t(c),(s,o)=>(C(),k("tr",{key:o},[e("td",null,[e("div",null,[e("img",{src:s.picture},null,8,q)])]),e("td",null,i(s.name),1),e("td",null,i(s.birthday),1),e("td",null,i(s.email),1),e("td",null,i(s.phone),1),e("td",null,[e("i",{onClick:a=>t(v)(s.id),class:"fa-solid fa-pen-to-square"},null,8,G),e("i",{onClick:a=>t(f)(s),class:"icon-bin"},null,8,H)])]))),128))])])]))}});export{j as default};
