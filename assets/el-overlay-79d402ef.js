import{n as P,aH as ve,aF as X,aN as oe,o as re,aO as ye,aI as Ce,aL as K,A as Ee,u as Q,aP as be,aQ as te,a1 as j,x as ge,y as Te,aR as he,m as Se,aw as G,aa as ee,ac as q,d as z,b as H,aq as b,j as we,ad as ke,a3 as se,D as O,a as N,c as x,e as V,ap as T,E as o,t as Ae,k as D,ar as Z,as as De,at as Me,ao as J,ax as ie,ay as ue,aS as Le,aG as Ie,s as Be,r as M,a2 as Ne,p as Oe,a0 as Re,a4 as $e,aT as ne,ag as Ye,aC as _e,l as He,au as ze,aU as Ue,v as Ve,T as We,aV as Pe,az as Xe}from"./index-837c2d33.js";import{u as Ge,F as xe,E as Fe}from"./focus-trap-5081f37f.js";import{t as Ke,U as de,u as le,d as ae}from"./el-input-b549b1f1.js";let U;const je=e=>{var n;if(!P)return 0;if(U!==void 0)return U;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const s=t.offsetWidth;t.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",t.appendChild(l);const d=l.offsetWidth;return(n=t.parentNode)==null||n.removeChild(t),U=s-d,U};function go(e,n){if(!P)return;if(!n){e.scrollTop=0;return}const t=[];let s=n.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)t.push(s),s=s.offsetParent;const l=n.offsetTop+t.reduce((c,f)=>c+f.offsetTop,0),d=l+n.offsetHeight,i=e.scrollTop,a=i+e.clientHeight;l<i?e.scrollTop=l:d>a&&(e.scrollTop=d-e.clientHeight)}const qe=(...e)=>n=>{e.forEach(t=>{ve(t)?t(n):t.value=n})};var W=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(W||{});const F=e=>{const n=X(e)?e:[e],t=[];return n.forEach(s=>{var l;X(s)?t.push(...F(s)):oe(s)&&X(s.children)?t.push(...F(s.children)):(t.push(s),oe(s)&&((l=s.component)!=null&&l.subTree)&&t.push(...F(s.component.subTree)))}),t},ce=Symbol("dialogInjectionKey"),Ze=(e,n,t)=>{let s={offsetX:0,offsetY:0};const l=a=>{const c=a.clientX,f=a.clientY,{offsetX:p,offsetY:v}=s,r=e.value.getBoundingClientRect(),m=r.left,h=r.top,R=r.width,$=r.height,Y=document.documentElement.clientWidth,L=document.documentElement.clientHeight,_=-m+p,I=-h+v,S=Y-m-R+p,w=L-h-$+v,B=g=>{const u=Math.min(Math.max(p+g.clientX-c,_),S),E=Math.min(Math.max(v+g.clientY-f,I),w);s={offsetX:u,offsetY:E},e.value.style.transform=`translate(${K(u)}, ${K(E)})`},y=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",y)},d=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",l)},i=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",l)};re(()=>{ye(()=>{t.value?d():i()})}),Ce(()=>{i()})},Je=e=>{Ee(e)||Ke("[useLockscreen]","You need to pass a ref param to this function");const n=Q("popup"),t=be(()=>n.bm("parent","hidden"));if(!P||te(document.body,t.value))return;let s=0,l=!1,d="0";const i=()=>{setTimeout(()=>{Se(document.body,t.value),l&&(document.body.style.width=d)},200)};j(e,a=>{if(!a){i();return}l=!te(document.body,t.value),l&&(d=document.body.style.width),s=je(n.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,f=ge(document.body,"overflowY");s>0&&(c||f==="scroll")&&l&&(document.body.style.width=`calc(100% - ${s}px)`),Te(document.body,t.value)}),he(()=>i())},fe=e=>{if(!e)return{onClick:G,onMousedown:G,onMouseup:G};let n=!1,t=!1;return{onClick:i=>{n&&t&&e(i),n=t=!1},onMousedown:i=>{n=i.target===i.currentTarget},onMouseup:i=>{t=i.target===i.currentTarget}}},Qe=ee({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:q([String,Array,Object])},zIndex:{type:q([String,Number])}}),eo={click:e=>e instanceof MouseEvent};var oo=z({name:"ElOverlay",props:Qe,emits:eo,setup(e,{slots:n,emit:t}){const s=Q("overlay"),l=c=>{t("click",c)},{onClick:d,onMousedown:i,onMouseup:a}=fe(e.customMaskEvent?void 0:l);return()=>e.mask?H("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:i,onMouseup:a},[b(n,"default")],W.STYLE|W.CLASS|W.PROPS,["onClick","onMouseup","onMousedown"]):we("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[b(n,"default")])}});const to=oo,me=ee({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:ke},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),so={close:()=>!0},no=["aria-label"],lo=["id"],ao=z({name:"ElDialogContent"}),ro=z({...ao,props:me,emits:so,setup(e){const n=e,{t}=Ge(),{Close:s}=Le,{dialogRef:l,headerRef:d,bodyId:i,ns:a,style:c}=se(ce),{focusTrapRef:f}=se(xe),p=qe(f,l),v=O(()=>n.draggable);return Ze(l,d,v),(r,m)=>(N(),x("div",{ref:o(p),class:T([o(a).b(),o(a).is("fullscreen",r.fullscreen),o(a).is("draggable",o(v)),o(a).is("align-center",r.alignCenter),{[o(a).m("center")]:r.center},r.customClass]),style:ie(o(c)),tabindex:"-1"},[V("header",{ref_key:"headerRef",ref:d,class:T(o(a).e("header"))},[b(r.$slots,"header",{},()=>[V("span",{role:"heading",class:T(o(a).e("title"))},Ae(r.title),3)]),r.showClose?(N(),x("button",{key:0,"aria-label":o(t)("el.dialog.close"),class:T(o(a).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=h=>r.$emit("close"))},[H(o(Me),{class:T(o(a).e("close"))},{default:D(()=>[(N(),Z(De(r.closeIcon||o(s))))]),_:1},8,["class"])],10,no)):J("v-if",!0)],2),V("div",{id:o(i),class:T(o(a).e("body"))},[b(r.$slots,"default")],10,lo),r.$slots.footer?(N(),x("footer",{key:0,class:T(o(a).e("footer"))},[b(r.$slots,"footer")],2)):J("v-if",!0)],6))}});var io=ue(ro,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const uo=ee({...me,appendToBody:{type:Boolean,default:!1},beforeClose:{type:q(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),co={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[de]:e=>Ie(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},fo=(e,n)=>{const s=Re().emit,{nextZIndex:l}=Be();let d="";const i=le(),a=le(),c=M(!1),f=M(!1),p=M(!1),v=M(e.zIndex||l());let r,m;const h=Ne("namespace",$e),R=O(()=>{const C={},A=`--${h.value}-dialog`;return e.fullscreen||(e.top&&(C[`${A}-margin-top`]=e.top),e.width&&(C[`${A}-width`]=K(e.width))),C}),$=O(()=>e.alignCenter?{display:"flex"}:{});function Y(){s("opened")}function L(){s("closed"),s(de,!1),e.destroyOnClose&&(p.value=!1)}function _(){s("close")}function I(){m==null||m(),r==null||r(),e.openDelay&&e.openDelay>0?{stop:r}=ne(()=>y(),e.openDelay):y()}function S(){r==null||r(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=ne(()=>g(),e.closeDelay):g()}function w(){function C(A){A||(f.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(C):S()}function B(){e.closeOnClickModal&&w()}function y(){P&&(c.value=!0)}function g(){c.value=!1}function u(){s("openAutoFocus")}function E(){s("closeAutoFocus")}function k(C){var A;((A=C.detail)==null?void 0:A.focusReason)==="pointer"&&C.preventDefault()}e.lockScroll&&Je(c);function pe(){e.closeOnPressEscape&&w()}return j(()=>e.modelValue,C=>{C?(f.value=!1,I(),p.value=!0,v.value=e.zIndex?v.value++:l(),Oe(()=>{s("open"),n.value&&(n.value.scrollTop=0)})):c.value&&S()}),j(()=>e.fullscreen,C=>{n.value&&(C?(d=n.value.style.transform,n.value.style.transform=""):n.value.style.transform=d)}),re(()=>{e.modelValue&&(c.value=!0,p.value=!0,I())}),{afterEnter:Y,afterLeave:L,beforeLeave:_,handleClose:w,onModalClick:B,close:S,doClose:g,onOpenAutoFocus:u,onCloseAutoFocus:E,onCloseRequested:pe,onFocusoutPrevented:k,titleId:i,bodyId:a,closed:f,style:R,overlayDialogStyle:$,rendered:p,visible:c,zIndex:v}},mo=["aria-label","aria-labelledby","aria-describedby"],po=z({name:"ElDialog",inheritAttrs:!1}),vo=z({...po,props:uo,emits:co,setup(e,{expose:n}){const t=e,s=Ye();ae({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},O(()=>!!s.title)),ae({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},O(()=>!!t.customClass));const l=Q("dialog"),d=M(),i=M(),a=M(),{visible:c,titleId:f,bodyId:p,style:v,overlayDialogStyle:r,rendered:m,zIndex:h,afterEnter:R,afterLeave:$,beforeLeave:Y,handleClose:L,onModalClick:_,onOpenAutoFocus:I,onCloseAutoFocus:S,onCloseRequested:w,onFocusoutPrevented:B}=fo(t,d);_e(ce,{dialogRef:d,headerRef:i,bodyId:p,ns:l,rendered:m,style:v});const y=fe(_),g=O(()=>t.draggable&&!t.fullscreen);return n({visible:c,dialogContentRef:a}),(u,E)=>(N(),Z(Pe,{to:"body",disabled:!u.appendToBody},[H(We,{name:"dialog-fade",onAfterEnter:o(R),onAfterLeave:o($),onBeforeLeave:o(Y),persisted:""},{default:D(()=>[He(H(o(to),{"custom-mask-event":"",mask:u.modal,"overlay-class":u.modalClass,"z-index":o(h)},{default:D(()=>[V("div",{role:"dialog","aria-modal":"true","aria-label":u.title||void 0,"aria-labelledby":u.title?void 0:o(f),"aria-describedby":o(p),class:T(`${o(l).namespace.value}-overlay-dialog`),style:ie(o(r)),onClick:E[0]||(E[0]=(...k)=>o(y).onClick&&o(y).onClick(...k)),onMousedown:E[1]||(E[1]=(...k)=>o(y).onMousedown&&o(y).onMousedown(...k)),onMouseup:E[2]||(E[2]=(...k)=>o(y).onMouseup&&o(y).onMouseup(...k))},[H(o(Fe),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o(I),onFocusAfterReleased:o(S),onFocusoutPrevented:o(B),onReleaseRequested:o(w)},{default:D(()=>[o(m)?(N(),Z(io,ze({key:0,ref_key:"dialogContentRef",ref:a},u.$attrs,{"custom-class":u.customClass,center:u.center,"align-center":u.alignCenter,"close-icon":u.closeIcon,draggable:o(g),fullscreen:u.fullscreen,"show-close":u.showClose,title:u.title,onClose:o(L)}),Ue({header:D(()=>[u.$slots.title?b(u.$slots,"title",{key:1}):b(u.$slots,"header",{key:0,close:o(L),titleId:o(f),titleClass:o(l).e("title")})]),default:D(()=>[b(u.$slots,"default")]),_:2},[u.$slots.footer?{name:"footer",fn:D(()=>[b(u.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):J("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,mo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ve,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var yo=ue(vo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const To=Xe(yo);export{To as E,F as f,go as s};
